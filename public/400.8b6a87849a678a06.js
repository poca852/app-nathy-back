"use strict";(self.webpackChunknathy=self.webpackChunknathy||[]).push([[400],{7400:(B,_,a)=>{a.r(_),a.d(_,{MainModule:()=>G});var m=a(6019),u=a(1360),r=a(9133),y=a(4897),g=a.n(y),t=a(3668),F=a(1251),f=a(2201),v=a(4793),b=a(1680),O=a(4522);let Z=(()=>{class o{constructor(e){this.http=e,this.baseUrl=F.N.baseUrl}getCreditos(e){return this.http.get(`${this.baseUrl}/creditos?estado=${e}`)}postCredito(e,n,c){return this.http.post(`${this.baseUrl}/creditos`,{prestado:e,cliente:n,cuotas:c}).pipe((0,f.U)(l=>l.ok),(0,v.K)(l=>l.erro.msg))}getCredito(e){return this.http.get(`${this.baseUrl}/creditos/${e}`)}getClientes(e){return this.http.get(`${this.baseUrl}/clientes?estado=${e}`)}getCliente(e){return this.http.get(`${this.baseUrl}/clientes/${e}`)}postPago(e,n){return this.http.post(`${this.baseUrl}/pagos`,{credito:e,pago:n}).pipe((0,f.U)(c=>c.ok),(0,v.K)(c=>(0,b.of)(c.error.msg)))}postCliente(e){return this.http.post(`${this.baseUrl}/clientes`,e).pipe((0,f.U)(n=>n.ok),(0,v.K)(n=>(0,b.of)(n.error.msg)))}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(O.eN))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var s=a(888),C=a(5694),p=a(8167),A=a(138),h=a(86);let P=(()=>{class o{constructor(e,n,c){this.fb=e,this.mainService=n,this.router=c,this.miFormulario=this.fb.group({dpi:["",r.kI.required],nombre:["",r.kI.required],alias:["",r.kI.required],ciudad:["",r.kI.required],celular:["",r.kI.required],direccion:["",r.kI.required]})}ngOnInit(){}guardar(){this.mainService.postCliente(this.miFormulario.value).subscribe(e=>{!0===e?(g().fire("Existo","cliente creado correctamente","success"),this.router.navigateByUrl("/main/renovaciones")):g().fire("Error",e,"error")})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(r.qu),t.Y36(Z),t.Y36(u.F0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-agregar-cliente"]],decls:34,vars:2,consts:[[1,"contenedor"],["inset",""],["autocomplete","off",3,"formGroup","ngSubmit"],["type","text","matInput","","formControlName","dpi"],["type","text","matInput","","formControlName","nombre"],["type","text","matInput","","formControlName","alias"],["type","text","matInput","","formControlName","ciudad"],["type","text","matInput","","formControlName","celular"],["type","text","matInput","","formControlName","direccion"],["mat-raised-button","","color","primary","type","submit",3,"disabled"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"mat-card"),t.TgZ(2,"mat-card-header"),t.TgZ(3,"mat-card-title"),t._uU(4,"Nuevo Cliente"),t.qZA(),t.qZA(),t._UZ(5,"mat-divider",1),t.TgZ(6,"mat-card-content"),t.TgZ(7,"form",2),t.NdJ("ngSubmit",function(){return n.guardar()}),t.TgZ(8,"mat-form-field"),t.TgZ(9,"mat-label"),t._uU(10,"Dpi"),t.qZA(),t._UZ(11,"input",3),t.qZA(),t.TgZ(12,"mat-form-field"),t.TgZ(13,"mat-label"),t._uU(14,"Nombre"),t.qZA(),t._UZ(15,"input",4),t.qZA(),t.TgZ(16,"mat-form-field"),t.TgZ(17,"mat-label"),t._uU(18,"Alias"),t.qZA(),t._UZ(19,"input",5),t.qZA(),t.TgZ(20,"mat-form-field"),t.TgZ(21,"mat-label"),t._uU(22,"Ciudad"),t.qZA(),t._UZ(23,"input",6),t.qZA(),t.TgZ(24,"mat-form-field"),t.TgZ(25,"mat-label"),t._uU(26,"Celular"),t.qZA(),t._UZ(27,"input",7),t.qZA(),t.TgZ(28,"mat-form-field"),t.TgZ(29,"mat-label"),t._uU(30,"Direccion"),t.qZA(),t._UZ(31,"input",8),t.qZA(),t.TgZ(32,"button",9),t._uU(33," Guardar "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(7),t.Q6J("formGroup",n.miFormulario),t.xp6(25),t.Q6J("disabled",n.miFormulario.invalid))},directives:[s.a8,s.dk,s.n5,C.d,s.dn,r._Y,r.JL,r.sg,p.KE,p.hX,A.Nt,r.Fj,r.JJ,r.u,h.lW],styles:["@media screen and (max-width: 375px){.contenedor[_ngcontent-%COMP%]{display:grid;justify-content:center;margin-top:25px;width:100%}.contenedor[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{width:300px}.contenedor[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-divider[_ngcontent-%COMP%]{margin-bottom:10px}.contenedor[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:grid;justify-content:stretch;width:290px}}"]}),o})();var x=a(7384),q=a(6952),J=a(8643),N=a(1015),T=a(2663);let S=(()=>{class o{constructor(e,n){this.authService=e,this.router=n}ngOnInit(){}logout(){this.router.navigateByUrl("/auth"),this.authService.logout()}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(x.e),t.Y36(u.F0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-home"]],decls:35,vars:0,consts:[["fullscreen",""],["mode","push"],["sideNav",""],["color","primary"],[1,"spacer"],["mat-icon-button","",3,"click"],["mat-list-item","","routerLink","./rutero",3,"click"],["mat-list-icon",""],["mat-list-item","","routerLink","./agregar-cliente",3,"click"],["mat-list-item","","routerLink","./renovaciones",3,"click"],["mat-button","",3,"click"],[1,"container"]],template:function(e,n){if(1&e){const c=t.EpF();t.TgZ(0,"mat-sidenav-container",0),t.TgZ(1,"mat-sidenav",1,2),t.TgZ(3,"mat-toolbar",3),t.TgZ(4,"span"),t._uU(5,"Men\xfa"),t.qZA(),t._UZ(6,"span",4),t.TgZ(7,"button",5),t.NdJ("click",function(){return t.CHM(c),t.MAs(2).toggle()}),t.TgZ(8,"mat-icon"),t._uU(9,"menu"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(10,"mat-nav-list"),t.TgZ(11,"a",6),t.NdJ("click",function(){return t.CHM(c),t.MAs(2).toggle()}),t.TgZ(12,"mat-icon",7),t._uU(13,"route"),t.qZA(),t.TgZ(14,"span"),t._uU(15,"Rutero"),t.qZA(),t.qZA(),t.TgZ(16,"a",8),t.NdJ("click",function(){return t.CHM(c),t.MAs(2).toggle()}),t.TgZ(17,"mat-icon",7),t._uU(18,"person_add"),t.qZA(),t.TgZ(19,"span"),t._uU(20,"Nuevo Cliente"),t.qZA(),t.qZA(),t.TgZ(21,"a",9),t.NdJ("click",function(){return t.CHM(c),t.MAs(2).toggle()}),t.TgZ(22,"mat-icon",7),t._uU(23,"published_with_changes"),t.qZA(),t.TgZ(24,"span"),t._uU(25,"Renovaciones"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(26,"mat-toolbar",3),t.TgZ(27,"button",5),t.NdJ("click",function(){return t.CHM(c),t.MAs(2).toggle()}),t.TgZ(28,"mat-icon"),t._uU(29,"menu"),t.qZA(),t.qZA(),t._UZ(30,"span",4),t.TgZ(31,"button",10),t.NdJ("click",function(){return n.logout()}),t._uU(32," Logout "),t.qZA(),t.qZA(),t.TgZ(33,"div",11),t._UZ(34,"router-outlet"),t.qZA(),t.qZA()}},directives:[q.TM,q.JX,J.Ye,h.lW,N.Hw,T.Hk,T.Tg,u.yS,T.Nh,u.lC],styles:[""]}),o})();var U=a(7878),M=a(2605),j=a(4022),R=a(6731);function I(o,i){if(1&o&&(t.TgZ(0,"mat-option",10),t._uU(1),t.qZA()),2&o){const e=i.$implicit,n=t.oxw();t.Q6J("value",n.vCuota(e)),t.xp6(1),t.hij(" ",e," ")}}let Y=(()=>{class o{constructor(e,n,c,l){this.fb=e,this.activatedRoutes=n,this.mainService=c,this.router=l,this.miFormulario=this.fb.group({pago:[,r.kI.required]}),this.fecha_actual=new Date,this.cuotas=[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30]}ngOnInit(){this.activatedRoutes.params.pipe((0,U.w)(({id:e})=>this.mainService.getCredito(e))).subscribe(e=>this.credito=e)}guardar(){if(this.miFormulario.invalid)return;const{pago:e}=this.miFormulario.value;this.mainService.postPago(this.credito._id,e).subscribe(n=>{!0===n?(g().fire("Exito","Pago Realizado correctamente","success"),this.router.navigateByUrl("/main")):g().fire("Error",n,"error")})}vCuota(e){var n;return Number((null===(n=this.credito)||void 0===n?void 0:n.valor_cuota)*e)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(r.qu),t.Y36(u.gz),t.Y36(Z),t.Y36(u.F0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-pagos"]],decls:54,vars:19,consts:[[1,"contenedor"],["inset",""],["autocomplete","off",3,"formGroup","ngSubmit"],["mat-align-tabs","center"],["label","Cuota fija","id","tarjeta"],["formControlName","pago"],[3,"value",4,"ngFor","ngForOf"],["mat-raised-button","","color","primary","type","submit",3,"disabled"],["label","Monto Variable"],["type","number","matInput","","formControlName","pago"],[3,"value"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"mat-card"),t.TgZ(2,"mat-card-header"),t.TgZ(3,"mat-card-title"),t._uU(4),t.qZA(),t.TgZ(5,"mat-card-subtitle"),t._uU(6),t.qZA(),t.qZA(),t._UZ(7,"mat-divider",1),t.TgZ(8,"mat-card-content"),t.TgZ(9,"p"),t.TgZ(10,"strong"),t._uU(11,"Saldo: "),t.qZA(),t._uU(12),t.qZA(),t.TgZ(13,"p"),t.TgZ(14,"strong"),t._uU(15,"Cuota: "),t.qZA(),t._uU(16),t.ALo(17,"number"),t.qZA(),t.TgZ(18,"p"),t.TgZ(19,"strong"),t._uU(20,"Fecha Inicio: "),t.qZA(),t._uU(21),t.ALo(22,"date"),t.qZA(),t.TgZ(23,"p"),t.TgZ(24,"strong"),t._uU(25,"Fecha Fin: "),t.qZA(),t._uU(26),t.ALo(27,"date"),t.qZA(),t.TgZ(28,"p"),t.TgZ(29,"strong"),t._uU(30,"Fecha Actual: "),t.qZA(),t._uU(31),t.ALo(32,"date"),t.qZA(),t.qZA(),t.TgZ(33,"mat-card-actions"),t.TgZ(34,"p"),t.TgZ(35,"strong"),t._uU(36,"Ingresar Pago"),t.qZA(),t.qZA(),t.TgZ(37,"form",2),t.NdJ("ngSubmit",function(){return n.guardar()}),t.TgZ(38,"mat-tab-group",3),t.TgZ(39,"mat-tab",4),t.TgZ(40,"mat-form-field"),t.TgZ(41,"mat-label"),t._uU(42,"Selecione la cuota"),t.qZA(),t.TgZ(43,"mat-select",5),t.YNc(44,I,2,2,"mat-option",6),t.qZA(),t.qZA(),t.TgZ(45,"button",7),t._uU(46,"Guardar"),t.qZA(),t.qZA(),t.TgZ(47,"mat-tab",8),t.TgZ(48,"mat-form-field"),t.TgZ(49,"mat-label"),t._uU(50,"Monto Variable"),t.qZA(),t._UZ(51,"input",9),t.qZA(),t.TgZ(52,"button",7),t._uU(53,"Guardar"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.Oqu(null==n.credito||null==n.credito.cliente?null:n.credito.cliente.nombre),t.xp6(2),t.Oqu(null==n.credito||null==n.credito.cliente?null:n.credito.cliente.alias),t.xp6(6),t.hij(" Q.",null==n.credito?null:n.credito.saldo_total,".00 "),t.xp6(4),t.hij(" Q.",t.lcZ(17,11,null==n.credito?null:n.credito.valor_cuota)," "),t.xp6(5),t.hij(" ",t.lcZ(22,13,null==n.credito?null:n.credito.fecha_inicio)," "),t.xp6(5),t.hij(" ",t.lcZ(27,15,null==n.credito?null:n.credito.fecha_fin)," "),t.xp6(5),t.hij(" ",t.lcZ(32,17,n.fecha_actual)," "),t.xp6(6),t.Q6J("formGroup",n.miFormulario),t.xp6(7),t.Q6J("ngForOf",n.cuotas),t.xp6(1),t.Q6J("disabled",n.miFormulario.invalid),t.xp6(7),t.Q6J("disabled",n.miFormulario.invalid))},directives:[s.a8,s.dk,s.n5,s.$j,C.d,s.dn,s.hq,r._Y,r.JL,r.sg,M.SP,M.uX,p.KE,p.hX,j.gD,r.JJ,r.u,m.sg,h.lW,r.wV,A.Nt,r.Fj,R.ey],pipes:[m.JJ,m.uU],styles:["@media screen and (max-width: 375px){.contenedor[_ngcontent-%COMP%]{display:grid;justify-content:center;margin-top:25px;width:100%}.contenedor[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{width:300px}.contenedor[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-divider[_ngcontent-%COMP%]{margin-bottom:10px}}"]}),o})();const k=function(o){return["/main/renovar",o]};function H(o,i){if(1&o&&(t.TgZ(0,"div",2),t.TgZ(1,"p"),t.TgZ(2,"strong"),t._uU(3),t.qZA(),t._uU(4),t.qZA(),t.qZA()),2&o){const e=i.$implicit;t.Q6J("routerLink",t.VKq(3,k,e._id)),t.xp6(3),t.hij("",e.nombre," - "),t.xp6(1),t.hij("",e.alias," ")}}let $=(()=>{class o{constructor(e,n){this.mainService=e,this.router=n,this.clientes=[]}ngOnInit(){this.mainService.getClientes(!1).subscribe(e=>this.clientes=e)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(Z),t.Y36(u.F0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-renovaciones"]],decls:2,vars:1,consts:[[1,"contenedor"],["class","card",3,"routerLink",4,"ngFor","ngForOf"],[1,"card",3,"routerLink"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.YNc(1,H,5,5,"div",1),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngForOf",n.clientes))},directives:[m.sg,u.rH],styles:["@media screen and (max-width: 375px){.contenedor[_ngcontent-%COMP%]{display:grid;width:100%}.contenedor[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border-bottom:thin solid rgba(0,0,0,.25);padding:10px;box-shadow:2px 2px 10px #00000040}}"]}),o})(),L=(()=>{class o{constructor(e,n,c,l){this.activatedRoute=e,this.mainService=n,this.fb=c,this.router=l,this.miFormulario=this.fb.group({prestado:[,[r.kI.required]],cuotas:[,r.kI.required]}),this.idCliente="",this.activatedRoute.params.subscribe(({id:d})=>this.idCliente=d)}ngOnInit(){this.activatedRoute.params.pipe((0,U.w)(({id:e})=>this.mainService.getCliente(e))).subscribe(e=>this.cliente=e)}guardar(){const{prestado:e,cuotas:n}=this.miFormulario.value;this.mainService.postCredito(e,this.idCliente,n).subscribe(c=>{!0===c&&(g().fire("Exito","Credito creado","success"),this.router.navigateByUrl("/main/rutero"))})}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(u.gz),t.Y36(Z),t.Y36(r.qu),t.Y36(u.F0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-renovar"]],decls:22,vars:5,consts:[[1,"contenedor"],["inset",""],["autocomplete","off",3,"formGroup","ngSubmit"],["matInput","","type","number","placeholder","Ejemplo (500)","formControlName","prestado"],["type","number","matInput","","placeholder","Ejemplo (23)","formControlName","cuotas"],["mat-raised-button","","color","primary","type","submit",3,"disabled"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"mat-card"),t.TgZ(2,"mat-card-header"),t.TgZ(3,"mat-card-title"),t._uU(4),t.qZA(),t.TgZ(5,"mat-card-subtitle"),t._uU(6),t.qZA(),t.TgZ(7,"mat-card-subtitle"),t._uU(8),t.qZA(),t.qZA(),t._UZ(9,"mat-divider",1),t.TgZ(10,"mat-card-content"),t.TgZ(11,"form",2),t.NdJ("ngSubmit",function(){return n.guardar()}),t.TgZ(12,"mat-form-field"),t.TgZ(13,"mat-label"),t._uU(14,"Valor"),t.qZA(),t._UZ(15,"input",3),t.qZA(),t.TgZ(16,"mat-form-field"),t.TgZ(17,"mat-label"),t._uU(18,"Cuotas"),t.qZA(),t._UZ(19,"input",4),t.qZA(),t.TgZ(20,"button",5),t._uU(21," Guardar "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.Oqu(null==n.cliente?null:n.cliente.nombre),t.xp6(2),t.Oqu(null==n.cliente?null:n.cliente.alias),t.xp6(2),t.hij("Tel: ",null==n.cliente?null:n.cliente.celular,""),t.xp6(3),t.Q6J("formGroup",n.miFormulario),t.xp6(9),t.Q6J("disabled",n.miFormulario.invalid))},directives:[s.a8,s.dk,s.n5,s.$j,C.d,s.dn,r._Y,r.JL,r.sg,p.KE,p.hX,A.Nt,r.wV,r.Fj,r.JJ,r.u,h.lW],styles:["@media screen and (max-width: 375px){.contenedor[_ngcontent-%COMP%]{display:grid;justify-content:center;margin-top:25px;width:100%}.contenedor[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{width:300px}.contenedor[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-divider[_ngcontent-%COMP%]{margin-bottom:15px}.contenedor[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:grid;grid-gap:10px;gap:10px;grid-template-columns:150px 150px;grid-template-rows:auto;overflow:hidden;width:100%}}"]}),o})();function Q(o,i){if(1&o){const e=t.EpF();t.TgZ(0,"div",3),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw().irAPagos(l._id)}),t.TgZ(1,"p"),t.TgZ(2,"strong"),t._uU(3),t.qZA(),t._uU(4),t.qZA(),t.TgZ(5,"p"),t.TgZ(6,"strong"),t._uU(7,"Cuotas(P)"),t.qZA(),t._uU(8),t.TgZ(9,"strong"),t._uU(10,"Saldo"),t.qZA(),t._uU(11),t.TgZ(12,"strong"),t._uU(13,"Abonos"),t.qZA(),t._uU(14),t.qZA(),t.qZA()}if(2&o){const e=i.$implicit;t.xp6(3),t.hij("",e.cliente.nombre," - "),t.xp6(1),t.hij("",e.cliente.alias," "),t.xp6(4),t.hij(": ",(e.saldo_total/e.valor_cuota).toFixed(1)," -- "),t.xp6(3),t.hij(": Q.",e.saldo_total," -- "),t.xp6(3),t.hij(": Q.",e.abonos," ")}}const w=[{path:"",component:S,children:[{path:"rutero",component:(()=>{class o{constructor(e,n){this.mainService=e,this.router=n,this.creditos=[],this.fecha_today=new Date}ngOnInit(){this.mainService.getCreditos("true").subscribe(e=>this.creditos=e)}irAPagos(e){this.router.navigateByUrl(`/main/pagos/${e}`)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(Z),t.Y36(u.F0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-rutero"]],decls:6,vars:4,consts:[[1,"contenedor"],[1,"header"],["class","card",3,"click",4,"ngFor","ngForOf"],[1,"card",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"p"),t._uU(3),t.ALo(4,"date"),t.qZA(),t.qZA(),t.YNc(5,Q,15,5,"div",2),t.qZA()),2&e&&(t.xp6(3),t.hij("Ruta para hoy (",t.lcZ(4,2,n.fecha_today),")"),t.xp6(2),t.Q6J("ngForOf",n.creditos))},directives:[m.sg],pipes:[m.uU],styles:["@media screen and (max-width: 375px){.contenedor[_ngcontent-%COMP%]{display:grid;width:100%}.contenedor[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border-bottom:thin solid rgba(0,0,0,.25);padding:10px}.contenedor[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{margin-top:10px;text-align:center}}"]}),o})()},{path:"agregar-cliente",component:P},{path:"renovaciones",component:$},{path:"renovar/:id",component:L},{path:"pagos/:id",component:Y},{path:"**",redirectTo:"rutero"}]}];let E=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[u.Bz.forChild(w)],u.Bz]}),o})();var X=a(7871);let G=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[[m.ez,X.q,E,r.UX]]}),o})()}}]);