"use strict";(self.webpackChunknathy=self.webpackChunknathy||[]).push([[400],{7400:(Q,A,a)=>{a.r(A),a.d(A,{MainModule:()=>L});var g=a(6019),m=a(2336),r=a(9133),t=a(3668),M=a(1251),h=a(2201),f=a(4793),_=a(1680),y=a(4522);let p=(()=>{class n{constructor(e){this.http=e,this.baseUrl=M.N.baseUrl}getCreditos(e){return this.http.get(`${this.baseUrl}/creditos?estado=${e}`)}postCredito(e,o,s){return this.http.post(`${this.baseUrl}/creditos`,{prestado:e,cliente:o,cuotas:s}).pipe((0,h.U)(l=>l.ok),(0,f.K)(l=>l.erro.msg))}getCredito(e){return this.http.get(`${this.baseUrl}/creditos/${e}`)}getClientes(e){return this.http.get(`${this.baseUrl}/clientes?estado=${e}`)}getCliente(e){return this.http.get(`${this.baseUrl}/clientes/${e}`)}postPago(e,o){return this.http.post(`${this.baseUrl}/pagos`,{credito:e,pago:o}).pipe((0,h.U)(s=>s.ok),(0,f.K)(s=>(0,_.of)(s.error.msg)))}postCliente(e){return this.http.post(`${this.baseUrl}/clientes`,e).pipe((0,h.U)(o=>o.ok),(0,f.K)(o=>(0,_.of)(o.erro.msg)))}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(y.eN))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var c=a(888),v=a(5694),d=a(7706),C=a(138),Z=a(86);let O=(()=>{class n{constructor(e,o,s){this.fb=e,this.mainService=o,this.router=s,this.miFormulario=this.fb.group({dpi:["",r.kI.required],nombre:["",r.kI.required],alias:["",r.kI.required],ciudad:["",r.kI.required],celular:["",r.kI.required],direccion:["",r.kI.required]})}ngOnInit(){}guardar(){this.mainService.postCliente(this.miFormulario.value).subscribe(e=>{!0===e&&this.router.navigateByUrl("/main/renovaciones")})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(r.qu),t.Y36(p),t.Y36(m.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-agregar-cliente"]],decls:34,vars:2,consts:[[1,"contenedor"],["inset",""],["autocomplete","off",3,"formGroup","ngSubmit"],["type","text","matInput","","formControlName","dpi"],["type","text","matInput","","formControlName","nombre"],["type","text","matInput","","formControlName","alias"],["type","text","matInput","","formControlName","ciudad"],["type","text","matInput","","formControlName","celular"],["type","text","matInput","","formControlName","direccion"],["mat-raised-button","","color","primary","type","submit",3,"disabled"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"mat-card"),t.TgZ(2,"mat-card-header"),t.TgZ(3,"mat-card-title"),t._uU(4,"Nuevo Cliente"),t.qZA(),t.qZA(),t._UZ(5,"mat-divider",1),t.TgZ(6,"mat-card-content"),t.TgZ(7,"form",2),t.NdJ("ngSubmit",function(){return o.guardar()}),t.TgZ(8,"mat-form-field"),t.TgZ(9,"mat-label"),t._uU(10,"Dpi"),t.qZA(),t._UZ(11,"input",3),t.qZA(),t.TgZ(12,"mat-form-field"),t.TgZ(13,"mat-label"),t._uU(14,"Nombre"),t.qZA(),t._UZ(15,"input",4),t.qZA(),t.TgZ(16,"mat-form-field"),t.TgZ(17,"mat-label"),t._uU(18,"Alias"),t.qZA(),t._UZ(19,"input",5),t.qZA(),t.TgZ(20,"mat-form-field"),t.TgZ(21,"mat-label"),t._uU(22,"Ciudad"),t.qZA(),t._UZ(23,"input",6),t.qZA(),t.TgZ(24,"mat-form-field"),t.TgZ(25,"mat-label"),t._uU(26,"Celular"),t.qZA(),t._UZ(27,"input",7),t.qZA(),t.TgZ(28,"mat-form-field"),t.TgZ(29,"mat-label"),t._uU(30,"Direccion"),t.qZA(),t._UZ(31,"input",8),t.qZA(),t.TgZ(32,"button",9),t._uU(33," Guardar "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(7),t.Q6J("formGroup",o.miFormulario),t.xp6(25),t.Q6J("disabled",o.miFormulario.invalid))},directives:[c.a8,c.dk,c.n5,v.d,c.dn,r._Y,r.JL,r.sg,d.KE,d.hX,C.Nt,r.Fj,r.JJ,r.u,Z.lW],styles:["@media screen and (max-width: 375px){.contenedor[_ngcontent-%COMP%]{display:grid;justify-content:center;margin-top:25px;width:100%}.contenedor[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{width:300px}.contenedor[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-divider[_ngcontent-%COMP%]{margin-bottom:10px}.contenedor[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:grid;justify-content:stretch;width:290px}}"]}),n})();var P=a(7384),b=a(6952),F=a(8643),x=a(1015),T=a(2318);let J=(()=>{class n{constructor(e,o){this.authService=e,this.router=o}ngOnInit(){}logout(){this.router.navigateByUrl("/auth"),this.authService.logout()}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(P.e),t.Y36(m.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-home"]],decls:35,vars:0,consts:[["fullscreen",""],["mode","push"],["sideNav",""],["color","primary"],[1,"spacer"],["mat-icon-button","",3,"click"],["mat-list-item","","routerLink","./rutero",3,"click"],["mat-list-icon",""],["mat-list-item","","routerLink","./agregar-cliente",3,"click"],["mat-list-item","","routerLink","./renovaciones",3,"click"],["mat-button","",3,"click"],[1,"container"]],template:function(e,o){if(1&e){const s=t.EpF();t.TgZ(0,"mat-sidenav-container",0),t.TgZ(1,"mat-sidenav",1,2),t.TgZ(3,"mat-toolbar",3),t.TgZ(4,"span"),t._uU(5,"Men\xfa"),t.qZA(),t._UZ(6,"span",4),t.TgZ(7,"button",5),t.NdJ("click",function(){return t.CHM(s),t.MAs(2).toggle()}),t.TgZ(8,"mat-icon"),t._uU(9,"menu"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(10,"mat-nav-list"),t.TgZ(11,"a",6),t.NdJ("click",function(){return t.CHM(s),t.MAs(2).toggle()}),t.TgZ(12,"mat-icon",7),t._uU(13,"route"),t.qZA(),t.TgZ(14,"span"),t._uU(15,"Rutero"),t.qZA(),t.qZA(),t.TgZ(16,"a",8),t.NdJ("click",function(){return t.CHM(s),t.MAs(2).toggle()}),t.TgZ(17,"mat-icon",7),t._uU(18,"person_add"),t.qZA(),t.TgZ(19,"span"),t._uU(20,"Nuevo Cliente"),t.qZA(),t.qZA(),t.TgZ(21,"a",9),t.NdJ("click",function(){return t.CHM(s),t.MAs(2).toggle()}),t.TgZ(22,"mat-icon",7),t._uU(23,"published_with_changes"),t.qZA(),t.TgZ(24,"span"),t._uU(25,"Renovaciones"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(26,"mat-toolbar",3),t.TgZ(27,"button",5),t.NdJ("click",function(){return t.CHM(s),t.MAs(2).toggle()}),t.TgZ(28,"mat-icon"),t._uU(29,"menu"),t.qZA(),t.qZA(),t._UZ(30,"span",4),t.TgZ(31,"button",10),t.NdJ("click",function(){return o.logout()}),t._uU(32," Logout "),t.qZA(),t.qZA(),t.TgZ(33,"div",11),t._UZ(34,"router-outlet"),t.qZA(),t.qZA()}},directives:[b.TM,b.JX,F.Ye,Z.lW,x.Hw,T.Hk,T.Tg,m.yS,T.Nh,m.lC],styles:[""]}),n})();var q=a(7878),N=a(4897),U=a.n(N);let S=(()=>{class n{constructor(e,o,s,l){this.fb=e,this.activatedRoutes=o,this.mainService=s,this.router=l,this.miFormulario=this.fb.group({pago:[,r.kI.required]})}ngOnInit(){this.activatedRoutes.params.pipe((0,q.w)(({id:e})=>this.mainService.getCredito(e))).subscribe(e=>this.credito=e)}guardar(){if(this.miFormulario.invalid)return;const{pago:e}=this.miFormulario.value;this.mainService.postPago(this.credito._id,e).subscribe(o=>{!0===o?(U().fire("Exito","Pago Realizado correctamente","success"),this.router.navigateByUrl("/main")):U().fire("Error",o,"error")})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(r.qu),t.Y36(m.gz),t.Y36(p),t.Y36(m.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-pagos"]],decls:34,vars:11,consts:[[1,"contenedor"],["inset",""],["autocomplete","off",3,"formGroup","ngSubmit"],["matInput","","type","number","formControlName","pago"],["mat-raised-button","","color","primary","type","submit",3,"disabled"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"mat-card"),t.TgZ(2,"mat-card-header"),t.TgZ(3,"mat-card-title"),t._uU(4),t.qZA(),t.TgZ(5,"mat-card-subtitle"),t._uU(6),t.qZA(),t.qZA(),t._UZ(7,"mat-divider",1),t.TgZ(8,"mat-card-content"),t.TgZ(9,"p"),t.TgZ(10,"strong"),t._uU(11,"Saldo: "),t.qZA(),t._uU(12),t.qZA(),t.TgZ(13,"p"),t.TgZ(14,"strong"),t._uU(15,"Fecha Inicio: "),t.qZA(),t._uU(16),t.ALo(17,"date"),t.qZA(),t.TgZ(18,"p"),t.TgZ(19,"strong"),t._uU(20,"Fecha Fin: "),t.qZA(),t._uU(21),t.ALo(22,"date"),t.qZA(),t.qZA(),t.TgZ(23,"mat-card-actions"),t.TgZ(24,"p"),t.TgZ(25,"strong"),t._uU(26,"Ingresar Pago"),t.qZA(),t.qZA(),t.TgZ(27,"form",2),t.NdJ("ngSubmit",function(){return o.guardar()}),t.TgZ(28,"mat-form-field"),t.TgZ(29,"mat-label"),t._uU(30,"Pago"),t.qZA(),t._UZ(31,"input",3),t.qZA(),t.TgZ(32,"button",4),t._uU(33,"Guardar"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.Oqu(null==o.credito||null==o.credito.cliente?null:o.credito.cliente.nombre),t.xp6(2),t.Oqu(null==o.credito||null==o.credito.cliente?null:o.credito.cliente.alias),t.xp6(6),t.hij(" Q.",null==o.credito?null:o.credito.saldo_total,".00 "),t.xp6(4),t.hij(" ",t.lcZ(17,7,null==o.credito?null:o.credito.fecha_inicio)," "),t.xp6(5),t.hij(" ",t.lcZ(22,9,null==o.credito?null:o.credito.fecha_fin)," "),t.xp6(6),t.Q6J("formGroup",o.miFormulario),t.xp6(5),t.Q6J("disabled",o.miFormulario.invalid))},directives:[c.a8,c.dk,c.n5,c.$j,v.d,c.dn,c.hq,r._Y,r.JL,r.sg,d.KE,d.hX,C.Nt,r.wV,r.Fj,r.JJ,r.u,Z.lW],pipes:[g.uU],styles:["@media screen and (max-width: 375px){.contenedor[_ngcontent-%COMP%]{display:grid;justify-content:center;margin-top:25px;width:100%}.contenedor[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{width:300px}.contenedor[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-divider[_ngcontent-%COMP%]{margin-bottom:10px}}"]}),n})();const R=function(n){return["/main/renovar",n]};function I(n,i){if(1&n&&(t.TgZ(0,"div",2),t.TgZ(1,"p"),t.TgZ(2,"strong"),t._uU(3),t.qZA(),t._uU(4),t.qZA(),t.qZA()),2&n){const e=i.$implicit;t.Q6J("routerLink",t.VKq(3,R,e._id)),t.xp6(3),t.hij("",e.nombre," - "),t.xp6(1),t.hij("",e.alias," ")}}let j=(()=>{class n{constructor(e,o){this.mainService=e,this.router=o,this.clientes=[]}ngOnInit(){this.mainService.getClientes(!1).subscribe(e=>this.clientes=e)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p),t.Y36(m.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-renovaciones"]],decls:2,vars:1,consts:[[1,"contenedor"],["class","card",3,"routerLink",4,"ngFor","ngForOf"],[1,"card",3,"routerLink"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.YNc(1,I,5,5,"div",1),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngForOf",o.clientes))},directives:[g.sg,m.rH],styles:["@media screen and (max-width: 375px){.contenedor[_ngcontent-%COMP%]{display:grid;width:100%}.contenedor[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border-bottom:thin solid rgba(0,0,0,.25);padding:10px;box-shadow:2px 2px 10px #00000040}}"]}),n})(),Y=(()=>{class n{constructor(e,o,s,l){this.activatedRoute=e,this.mainService=o,this.fb=s,this.router=l,this.miFormulario=this.fb.group({prestado:[,[r.kI.required]],cuotas:[,r.kI.required]}),this.idCliente="",this.activatedRoute.params.subscribe(({id:u})=>this.idCliente=u)}ngOnInit(){this.activatedRoute.params.pipe((0,q.w)(({id:e})=>this.mainService.getCliente(e))).subscribe(e=>this.cliente=e)}guardar(){const{prestado:e,cuotas:o}=this.miFormulario.value;this.mainService.postCredito(e,this.idCliente,o).subscribe(s=>{!0===s&&this.router.navigateByUrl("/main/rutero")})}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(m.gz),t.Y36(p),t.Y36(r.qu),t.Y36(m.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-renovar"]],decls:22,vars:5,consts:[[1,"contenedor"],["inset",""],["autocomplete","off",3,"formGroup","ngSubmit"],["matInput","","type","number","placeholder","Ejemplo (500)","formControlName","prestado"],["type","number","matInput","","placeholder","Ejemplo (23)","formControlName","cuotas"],["mat-raised-button","","color","primary","type","submit",3,"disabled"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.TgZ(1,"mat-card"),t.TgZ(2,"mat-card-header"),t.TgZ(3,"mat-card-title"),t._uU(4),t.qZA(),t.TgZ(5,"mat-card-subtitle"),t._uU(6),t.qZA(),t.TgZ(7,"mat-card-subtitle"),t._uU(8),t.qZA(),t.qZA(),t._UZ(9,"mat-divider",1),t.TgZ(10,"mat-card-content"),t.TgZ(11,"form",2),t.NdJ("ngSubmit",function(){return o.guardar()}),t.TgZ(12,"mat-form-field"),t.TgZ(13,"mat-label"),t._uU(14,"Valor"),t.qZA(),t._UZ(15,"input",3),t.qZA(),t.TgZ(16,"mat-form-field"),t.TgZ(17,"mat-label"),t._uU(18,"Cuotas"),t.qZA(),t._UZ(19,"input",4),t.qZA(),t.TgZ(20,"button",5),t._uU(21," Guardar "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&e&&(t.xp6(4),t.Oqu(null==o.cliente?null:o.cliente.nombre),t.xp6(2),t.Oqu(null==o.cliente?null:o.cliente.alias),t.xp6(2),t.hij("Tel: ",null==o.cliente?null:o.cliente.celular,""),t.xp6(3),t.Q6J("formGroup",o.miFormulario),t.xp6(9),t.Q6J("disabled",o.miFormulario.invalid))},directives:[c.a8,c.dk,c.n5,c.$j,v.d,c.dn,r._Y,r.JL,r.sg,d.KE,d.hX,C.Nt,r.wV,r.Fj,r.JJ,r.u,Z.lW],styles:["@media screen and (max-width: 375px){.contenedor[_ngcontent-%COMP%]{display:grid;justify-content:center;margin-top:25px;width:100%}.contenedor[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]{width:300px}.contenedor[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-divider[_ngcontent-%COMP%]{margin-bottom:15px}.contenedor[_ngcontent-%COMP%]   mat-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{display:grid;grid-gap:10px;gap:10px;grid-template-columns:150px 150px;grid-template-rows:auto;overflow:hidden;width:100%}}"]}),n})();function k(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",2),t.NdJ("click",function(){const l=t.CHM(e).$implicit;return t.oxw().irAPagos(l._id)}),t.TgZ(1,"p"),t.TgZ(2,"strong"),t._uU(3),t.qZA(),t._uU(4),t.qZA(),t.TgZ(5,"p"),t.TgZ(6,"strong"),t._uU(7,"Cuotas(P)"),t.qZA(),t._uU(8),t.TgZ(9,"strong"),t._uU(10,"Saldo"),t.qZA(),t._uU(11),t.TgZ(12,"strong"),t._uU(13,"Abonos"),t.qZA(),t._uU(14),t.qZA(),t.qZA()}if(2&n){const e=i.$implicit;t.xp6(3),t.hij("",e.cliente.nombre," - "),t.xp6(1),t.hij("",e.cliente.alias," "),t.xp6(4),t.hij(": ",e.saldo_total/e.valor_cuota," -- "),t.xp6(3),t.hij(": Q.",e.saldo_total," -- "),t.xp6(3),t.hij(": Q.",e.abonos," ")}}const H=[{path:"",component:J,children:[{path:"rutero",component:(()=>{class n{constructor(e,o){this.mainService=e,this.router=o,this.creditos=[]}ngOnInit(){this.mainService.getCreditos("true").subscribe(e=>this.creditos=e)}irAPagos(e){this.router.navigateByUrl(`/main/pagos/${e}`)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(p),t.Y36(m.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-rutero"]],decls:2,vars:1,consts:[[1,"contenedor"],["class","card",3,"click",4,"ngFor","ngForOf"],[1,"card",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.YNc(1,k,15,5,"div",1),t.qZA()),2&e&&(t.xp6(1),t.Q6J("ngForOf",o.creditos))},directives:[g.sg],styles:["@media screen and (max-width: 375px){.contenedor[_ngcontent-%COMP%]{display:grid;width:100%}.contenedor[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{border-bottom:thin solid rgba(0,0,0,.25);padding:10px}}"]}),n})()},{path:"agregar-cliente",component:O},{path:"renovaciones",component:j},{path:"renovar/:id",component:Y},{path:"pagos/:id",component:S},{path:"**",redirectTo:"rutero"}]}];let $=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[m.Bz.forChild(H)],m.Bz]}),n})();var w=a(9715);let L=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[[g.ez,w.q,$,r.UX]]}),n})()}}]);